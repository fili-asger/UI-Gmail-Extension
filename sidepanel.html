<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./src/sidepanel.css" />
    <title>Gmail Assistant</title>
  </head>
  <body>
    <!-- Top Bar -->
    <div id="top-bar">
      <h1>Gmail Assistant</h1>
      <button id="settings-btn" title="Settings">⚙️</button>
    </div>

    <!-- Main Content Area -->
    <div id="main-content" class="content-view active-view">
      <button id="get-email-btn">Get Email Content</button>

      <!-- Assistant Selection Dropdown -->
      <div class="assistant-selector-header">
        <label for="assistant-select">Select Assistant:</label>
        <button id="edit-assistants-link" class="link-button">Edit List</button>
      </div>
      <select id="assistant-select">
        <option value="">Loading assistants...</option>
      </select>

      <button id="generate-reply-btn">Generate Reply</button>
      <div id="status"></div>
      <pre
        id="email-content"
        style="
          white-space: pre-wrap;
          word-wrap: break-word;
          border: 1px solid #ccc;
          padding: 5px;
          margin-top: 10px;
          max-height: 200px;
          overflow-y: auto;
        "
      ></pre>
      <textarea
        id="reply-output"
        rows="10"
        style="width: 95%; margin-top: 10px"
        placeholder="Generated reply will appear here..."
      ></textarea>
      <button id="insert-reply-btn">Insert Reply into Gmail</button>
    </div>

    <!-- Settings View Area -->
    <div id="settings-view" class="content-view">
      <h2>Settings</h2>
      <label for="api-key">OpenAI API Key:</label>
      <input type="password" id="api-key" style="width: 80%" />
      <button id="save-key-btn">Save Key</button>
      <button id="back-to-main-btn">Back</button>
    </div>

    <!-- Assistant Edit View Area -->
    <div id="assistant-edit-view" class="content-view">
      <h2>Edit Assistant List</h2>
      <p>Select which assistants appear in the dropdown:</p>

      <!-- Search Bar -->
      <input
        type="search"
        id="assistant-search-input"
        placeholder="Search assistants..."
      />

      <!-- Select/Deselect All Buttons -->
      <div class="select-all-controls">
        <button id="select-all-assistants-btn" class="small-link-button">
          Select All Visible
        </button>
        <button id="deselect-all-assistants-btn" class="small-link-button">
          Deselect All Visible
        </button>
      </div>
      <div id="assistant-list-container">
        <!-- Checkboxes will be populated here -->
        <p>Loading assistants...</p>
      </div>
      <div class="button-group">
        <button id="save-assistant-filter-btn">Save</button>
        <button id="cancel-assistant-filter-btn" class="secondary-button">
          Cancel
        </button>
      </div>
    </div>

    <script type="module" src="./src/sidepanel.ts"></script>
  </body>
</html>
